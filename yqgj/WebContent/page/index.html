<!DOCTYPE html>
<html lang="en">
	<head>
		<title>舆情管家</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
		<script type="text/javascript" src="js/cookie.js"></script>
		<script type="text/javascript" src="layui/layui.js"></script>
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese"
		 rel="stylesheet">
		<link href="http://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;subset=latin-ext"
		 rel="stylesheet">
		<link href="css/style.css" type="text/css" rel="stylesheet" media="all">
		<link rel="stylesheet" href="css/font-awesome.min.css"> <!-- Font-Awesome-Icons-CSS -->
		<link href="css/popup-box.css" rel="stylesheet" type="text/css" media="all" /> <!-- popup box css -->
	</head>
	<body>
		<section class="register">
			<div class="header">
				<div class="logo">
					<a href="#">舆情管家</a>
				</div>
				<div class="social">
					<li><a href="#"><span class="fa fa-facebook"></span></a></li>
					<li><a href="#"><span class="fa fa-twitter"></span></a></li>
					<li><a href="#"><span class="fa fa-linkedin"></span></a></li>
					<li><a href="#"><span class="fa fa-google-plus"></span></a></li>
				</div>
				<div class="clear"></div>
			</div>
			<div class="tlinks"></div>
			<div class="register-full">
				<div class="register-left">
					<div class="register">
						<h1>高校舆情数据</br>分析挖掘与可视化系统</h1>
						<p>高校舆情数据分析挖掘与可视化系统，获取舆情秘书，新浪微博，网易新闻，新浪新闻等最新的高校舆情信息，展示各大高校的舆情信息走向等基本信息，对爬取得到的新闻词云分析。此系统主要是对从不同站点采集到的各大高校的舆情数据进行分析并通过界面展示出来。</p>
						<div class="content3">
							<ul>
								<li><a class="" href="#"> 联系我们</a></li>
								<li><a class="read" href="#"> 意见反馈</a></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="register-right">
					<div class="register-in">
						<a class="book popup-with-zoom-anim button-isi zoomIn animated" data-wow-delay=".5s" href="#small-dialog2">点击注册 »</a>
					</div>
					<div class="register-in middle">
						<a class="book popup-with-zoom-anim button-isi zoomIn animated" data-wow-delay=".5s" href="#small-dialog">点击登录 »</a>
					</div>
					<div class="register-in">
						<a class="book popup-with-zoom-anim button-isi zoomIn animated" data-wow-delay=".5s" href="#small-dialog1">游客模式 »</a>
					</div>
					<div class="clear"> </div>
				</div>
				<div class="clear"> </div>
			</div>
		</section>
		<div class="pop-up">
			<div id="small-dialog" class="mfp-hide book-form">
				<div class="login-form login-form-left">
					<div class="agile-row">
						<h3>登录</h3>
						<span class="fa fa-lock"></span>
						<div class="clear"></div>
						<div class="login-agileits-top">
							<form id="login_form">
								<input type="text" id="login_user_name" class="name" name="user_name" Placeholder="请输入用户名" required="" />
								<div class="tip"><span id="login_user_name_tip"></span></div>
								<input type="password" id="login_user_psd" class="password" name="user_psd" Placeholder="请输入密码" required="" />
								<div class="tip"><span id="login_user_psd_tip"></span></div>
								<input type="submit" id="login_submit" value="登录">
							</form>
						</div>
						<div class="login-agileits-bottom">
							<h6><a href="forget_psd">忘记密码?</a></h6>
						</div>
					</div>
				</div>

			</div>
		</div>
		<div class="pop-up">
			<div id="small-dialog1" class="mfp-hide book-form">
				<div class="login-form login-form-left">
					<div class="agile-row">
						<h3>Be the first to hear</h3>
						<p>Sign up to get notified about latest offers, news and events. Stay tuned!</p>
						<div class="clear"></div>
						<div class="login-agileits-top">
							<form action="#" method="post">
								<input type="text" class="name" name="name" Placeholder="Full Name" required="" />
								<input type="email" class="email" name="email" Placeholder="Email" required="" />
								<input type="submit" value="Get Notified">
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="pop-up">
			<div id="small-dialog2" class="mfp-hide book-form">
				<div class="login-form login-form-left">
					<div class="agile-row">
						<h3>请填写注册信息</h3>
						<div class="login-agileits-top">
							<!-- http://localhost:8080/yqgj/login -->
							<form id="register_form">
								<input type="text" id="reg_user_name" class="name" name="user_name" Placeholder="请输入用户名(字母开头，5-16位字母数字下划线组合)"
								 required="" />
								<div class="tip"><span id="reg_user_name_tip"></span></div>
								<input type="password" id="reg_user_psd" class="password" name="user_psd" Placeholder="请输入密码(字母开头，6~18字母数字下划线组合)"
								 required="" />
								<div class="tip"><span id="reg_user_psd_tip"></span></div>
								<input type="password" id="reg_confirm_password" class="password" name="confirm_password" Placeholder="请确认密码(字母开头，6~18字母数字下划线组合)"
								 required="" />
								<div class="tip"><span id="reg_confirm_user_psd_tip"></span></div>
								<input type="submit" id="register_submit" value="注册">
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="js/jquery.magnific-popup.js" type="text/javascript"></script>
		<script>
			layui.use(['layer'], function() {
				var layer = layui.layer;
				$(document).ready(function() {
					$('.popup-with-zoom-anim').magnificPopup({
						type: 'inline',
						fixedContentPos: false,
						fixedBgPos: true,
						overflowY: 'auto',
						closeBtnInside: true,
						preloader: false,
						midClick: true,
						removalDelay: 300,
						mainClass: 'my-mfp-zoom-in'
					});
				
					$("#register_form").submit(function() {
						console.log("点击register submit");
						$.ajax({
							url: 'register',
							type: 'POST',
							dataType: 'json',
							data: {
								user_name: $('#reg_user_name').val(),
								user_psd: $('#reg_user_psd').val()
							},
							success: function(data) {
								console.log(data);
								var data = data.data;
								if (data.retcode == "1000") {
									console.log(data.data);
									cookie.set("user_name", $('#reg_user_name').val());
									cookie.set("user_id", data.data.user_id);
									window.location.href = "home";
								} else {
									console.log(data.data);
									layer.msg("注册失败,请重新注册");
								}
							}
						})
						return false;
					});
				
					$("#login_form").submit(function() {
						var id = layer.msg("登录中", {
							icon: 16,
							shade: 0.5,
							time: false
						});
						console.log("点击login submit");
						$.ajax({
							url: 'login',
							type: 'POST',
							dataType: 'json',
							data: {
								user_name: $('#login_user_name').val(),
								user_psd: $('#login_user_psd').val()
							},
							success: function(data) {
								layer.close(id);
								var data = data.data;
								if (data.retcode == "1002") {
									console.log(data.data);
									cookie.set("user_name", data.data.user_name);
									cookie.set("user_id", data.data.user_id);
									window.location.href = "home";
								} else {
									console.log(data.data);
									layer.msg("登录失败,请重新登录");
								}
							}
						})
						return false;
					});
				
					var is_reg_User_name_valid = false;
					var is_reg_User_psd_valid = false;
					var is_reg_Confirm_psd_valid = false;
					//验证按钮是否 可以点击了  
					function checkRegisterBtnIsEnable() {
						if (is_reg_User_name_valid == true && is_reg_User_psd_valid == true && is_reg_Confirm_psd_valid == true) {
							$("#register_submit").prop("disabled", "");
						} else {
							$("#register_submit").prop("disabled", "disabled");
						}
					}
				
					//监听姓名输入
					$("#reg_user_name").bind("input propertychange", function() {
						var user_name = $(this).val().trim();
						var reg = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;
						var r = user_name.match(reg);
						if (user_name != "") {
							if (r == null) {
								$("#reg_user_name_tip").html("");
								$("#reg_user_name_tip").append("用户名格式输入不正确")
								is_reg_User_name_valid = false;
							} else {
								$("#reg_user_name_tip").html("");
								is_reg_User_name_valid = true;
							}
						} else {
							$("#reg_user_name_tip").html("");
							is_reg_User_name_valid = false;
						}
						checkRegisterBtnIsEnable();
					});
				
					//监听密码输入
					$("#reg_user_psd").bind("input propertychange", function() {
						var user_psd = $(this).val().trim();
						var reg = /^[a-zA-Z]\w{5,17}$/;
						var r = user_psd.match(reg);
						if (user_psd != "") {
							if (r == null) {
								$("#reg_user_psd_tip").html("");
								$("#reg_user_psd_tip").append("密码格式不正确");
								is_reg_User_psd_valid = false;
							} else {
								$("#reg_user_psd_tip").html("");
								is_reg_User_psd_valid = true;
							}
						} else {
							$("#reg_user_psd_tip").html("");
							is_reg_User_psd_valid = false;
						}
						checkRegisterBtnIsEnable();
					});
				
					//监听密码输入
					$("#reg_confirm_password").bind("input propertychange", function() {
						var user_confirm_psd = $(this).val().trim();
						var reg = /^[a-zA-Z]\w{5,17}$/;
						var r = user_confirm_psd.match(reg);
						if (user_confirm_psd != "") {
							if (r == null) {
								$("#reg_confirm_user_psd_tip").html("");
								$("#reg_confirm_user_psd_tip").append("密码格式不正确");
								is_reg_Confirm_psd_valid = false;
							} else {
								if (user_confirm_psd == $("#reg_user_psd").val().trim()) {
									$("#reg_confirm_user_psd_tip").html("");
									is_reg_Confirm_psd_valid = true;
								} else {
									$("#reg_confirm_user_psd_tip").html("");
									$("#reg_confirm_user_psd_tip").append("确认密码与密码不相符");
									is_reg_Confirm_psd_valid = false;
								}
							}
						} else {
							$("#reg_confirm_user_psd_tip").html("");
							is_reg_Confirm_psd_valid = false;
						}
						checkRegisterBtnIsEnable();
					});
				
					var is_login_User_name_valid = false;
					var is_login_User_psd_valid = false;
					//验证按钮是否 可以点击了  
					function checkLoginBtnIsEnable() {
						if (is_login_User_name_valid == true && is_login_User_psd_valid == true) {
							$("#login_submit").prop("disabled", "");
						} else {
							$("#login_submit").prop("disabled", "disabled");
						}
					}
				
					//监听姓名输入
					$("#login_user_name").bind("input propertychange", function() {
						var user_name = $(this).val().trim();
						var reg = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;
						var r = user_name.match(reg);
						if (user_name != "") {
							if (r == null) {
								$("#login_user_name_tip").html("");
								$("#login_user_name_tip").append("用户名格式输入不正确");
								is_login_User_name_valid = false;
							} else {
								$("#login_user_name_tip").html("");
								is_login_User_name_valid = true;
							}
						} else {
							$("#login_user_name_tip").html("");
							is_login_User_name_valid = false;
						}
						checkLoginBtnIsEnable();
					});
				
					//监听密码输入
					$("#login_user_psd").bind("input propertychange", function() {
						var user_psd = $(this).val().trim();
						var reg = /^[a-zA-Z]\w{5,17}$/;
						var r = user_psd.match(reg);
						if (user_psd != "") {
							if (r == null) {
								$("#login_user_psd_tip").html("");
								$("#login_user_psd_tip").append("密码格式不正确");
								is_login_User_psd_valid = false;
							} else {
								$("#login_user_psd_tip").html("");
								is_login_User_psd_valid = true;
							}
						} else {
							$("#login_user_psd_tip").html("");
							is_login_User_psd_valid = false;
						}
						checkLoginBtnIsEnable();
					});
				});
			});
			
		</script>
	</body>
</html>
